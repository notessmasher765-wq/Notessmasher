<style>
    /* Navbar Base */
    nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: clamp(0.5rem, 2vw, 1rem) clamp(1rem, 5vw, 3rem);
        background: linear-gradient(135deg, #f5f5dc, #ce93d8);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
        position: sticky;
        top: 0;
        z-index: 1000;
        flex-wrap: wrap;
    }

    nav .logo a {
        text-decoration: none;
        color: #6a1b9a;
        font-weight: 700;
        font-size: clamp(1.2rem, 2.5vw, 1.6rem);
        letter-spacing: 0.5px;
    }

    /* Menu Links */
    #navLinks {
        list-style: none;
        display: flex;
        gap: 1.5rem;
        align-items: center;
        transition: all 0.3s ease-in-out;
    }

     nav ul {
        list-style: none;
        display: flex;
        gap: 2rem;
        align-items: center;
    }

    nav ul li {
        position: relative;
    }

    nav ul li a {
        text-decoration: none;
        color: #333;
        font-weight: 500;
        padding: 8px 12px;
        transition: 0.3s;
        border-radius: 6px;
    }

    nav ul li a:hover {
        color: #6a1b9a;
        background: #f3e5f5;
    }

    /* Dropdown */
    .dropdown {
        display: none;
        position: absolute;
        background: #fff;
        min-width: 180px;
        top: 120%;
        left: 0;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
        z-index: 1001;
    }

    .dropdown a {
        display: block;
        padding: 10px 14px;
        color: #333;
        text-align: left;
        white-space: nowrap;
    }

    .dropdown a:hover {
        background: #f3e5f5;
        color: #6a1b9a;
    }

    /* Hover (Desktop) */
    #navLinks li:hover .dropdown {
        display: block;
    }

    /* Search Results */
    #searchResults {
        position: absolute;
        top: 40px;
        left: 0;
        width: 250px;
        max-height: 200px;
        overflow-y: auto;
        display: none;
        background: #fff;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        border-radius: 6px;
        z-index: 2000;
    }

    /* Hamburger Icon */
    .menu-icon {
        display: none;
        font-size: 1.8rem;
        cursor: pointer;
        color: #6a1b9a;
        background: none;
        border: none;
    }

    /* Mobile Responsive */
    @media (max-width: 850px) {
        .menu-icon {
            display: block;
        }

        #navLinks {
            display: none;
            flex-direction: column;
            width: 100%;
            background: #fff;
            padding: 1rem 0;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            position: absolute;
            top: 100%;
            left: 0;
        }

        #navLinks.show {
            display: flex;
        }

        #navLinks li {
            width: 100%;
            text-align: center;
        }

        #navLinks li a {
            display: block;
            width: 100%;
        }

        /* Disable hover dropdowns on mobile */
        #navLinks li:hover .dropdown {
            display: none;
        }

        #navLinks li .dropdown {
            position: relative;
            top: 0;
            left: 0;
            box-shadow: none;
            border-radius: 6px;
            margin-top: 4px;
        }

        #navLinks li.active .dropdown {
            display: block;
        }

        /* Center search bar */
        #noteSearch {
            width: 90%;
            margin: 10px auto;
            display: block;
        }
    }
</style>

<script>
   
// ====== Hamburger Menu Toggle ======
function toggleMenu() {
    const navLinks = document.getElementById("navLinks");
    const menuIcon = document.querySelector(".menu-icon");
    navLinks.classList.toggle("show");
    menuIcon.textContent = navLinks.classList.contains("show") ? "✖" : "☰";
}

// ====== Mobile Dropdown with Sticky Timeout ======
document.querySelectorAll('#navLinks li > a').forEach(link => {
    link.addEventListener('click', function(e) {
        const parentLi = e.target.closest("li");
        const dropdown = parentLi.querySelector(".dropdown");

        // If no dropdown, ignore
        if(!dropdown) return;

        e.preventDefault(); // Prevent default link action

        // Remove 'active' from other dropdowns
        document.querySelectorAll('#navLinks li.active').forEach(li => {
            if(li !== parentLi) {
                li.classList.remove('active');
                if(li.hideTimeout) clearTimeout(li.hideTimeout);
            }
        });

        // Show this dropdown
        parentLi.classList.add("active");

        // Clear previous timeout if exists
        if(parentLi.hideTimeout) clearTimeout(parentLi.hideTimeout);

        // Hide dropdown after 5 seconds
        parentLi.hideTimeout = setTimeout(() => {
            parentLi.classList.remove("active");
        }, 5000); // adjust 5000ms = 5s
    });
});

// ====== Search Logic ======
const searchInput = document.getElementById('noteSearch');
const resultsDiv = document.getElementById('searchResults');

if (searchInput) {
    searchInput.addEventListener('input', () => {
        const query = searchInput.value.trim();
        resultsDiv.innerHTML = '';

        if (query) {
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = '<div style="padding:8px; color:#666;">Searching...</div>';

            fetch(`/search_notes?q=${encodeURIComponent(query)}`)
                .then(res => res.json())
                .then(data => {
                    resultsDiv.innerHTML = '';
                    if (data.length === 0) {
                        resultsDiv.innerHTML = '<div style="padding:8px; color:#666;">No results found</div>';
                    } else {
                        data.forEach(n => {
                            const div = document.createElement('div');
                            div.textContent = n.title;
                            div.style.padding = '8px';
                            div.style.cursor = 'pointer';
                            div.addEventListener('click', () => {
                                window.location.href = `/view_notes?search=${encodeURIComponent(n.title)}`;
                            });
                            resultsDiv.appendChild(div);
                        });
                    }
                }).catch(err => {
                    console.error(err);
                    resultsDiv.innerHTML = '<div style="padding:8px; color:red;">Error fetching results</div>';
                });
        } else {
            resultsDiv.style.display = 'none';
        }
    });

    // Redirect on Enter
    searchInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            const query = searchInput.value.trim();
            if (query) {
                window.location.href = `/view_notes?search=${encodeURIComponent(query)}`;
            }
        }
    });

    // Hide results when clicking outside
    document.addEventListener('click', (e) => {
        if (!searchInput.contains(e.target) && !resultsDiv.contains(e.target)) {
            resultsDiv.style.display = 'none';
        }
    });
}


</script>



<!-- Navbar -->
<nav>
    <div class="logo">
        <a href="{{ url_for('routes.home') }}">Notes Smasher</a>
    </div>

    <button class="menu-icon" onclick="toggleMenu()">☰</button>

    <ul id="navLinks">
        <li><a href="{{ url_for('routes.user_home') }}">Home</a></li>
        <li><a href="{{ url_for('routes.upload') }}">Upload Notes</a></li>

        <li>
            <a href="#" onclick="toggleDropdown(event)">Notes ▼</a>
            <div class="dropdown">
                <a href="{{ url_for('routes.my_notes') }}">My Notes</a>
                <a href="{{ url_for('routes.view_notes') }}">View Notes</a>
            </div>
        </li>

        <li><a href="{{ url_for('routes.aktu') }}">AKTU</a></li>
        <li><a href="{{ url_for('routes.dashboard') }}">Dashboard</a></li>
        <li><a href="{{ url_for('routes.auth') }}">Login / Register</a></li>

        <li>
            <a href="#" onclick="toggleDropdown(event)">Contact ▼</a>
            <div class="dropdown">
                <a href="{{ url_for('routes.contact') }}">Collaboration</a>
                <a href="{{ url_for('routes.about_us') }}">About Us</a>
            </div>
        </li>

        <li>
            <input type="text" id="noteSearch" placeholder="Search notes..."
                style="padding:6px 10px; border-radius:6px; border:1px solid #ccc; width: 90%;">
            <div id="searchResults"></div>
        </li>

        <li>
            <a href="{{ url_for('routes.profile') }}" title="My Profile">
                <img src="{{ url_for('static', filename='images/image.png') }}" alt="Profile Icon"
                    width="35" height="35" style="border-radius: 50%; vertical-align: middle;">
            </a>
        </li>
    </ul>
</nav>


