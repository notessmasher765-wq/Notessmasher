<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO -->
  <title>Login & Register | StudySpark</title>
  <meta name="description"
    content="Join StudySpark to upload, view, and share study notes. Login or register to access your dashboard and AKTU resources daily.">

<style>
body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #f3e5f5, #e1bee7);
  margin: 0;
  padding: 0;
}

.main-container {
  display: flex;
  flex-direction: row;
  background: white;
  border-radius: 20px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  overflow: hidden;
  max-width: 900px;
  width: 90%;
  min-height: 60vh; /* added min-height for balance */
  margin: 40px auto;
}

.illustration {
  flex: 1;
  background-color: #f3e5f5;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  padding: clamp(10px, 4vw, 20px);
}

.illustration img {
  max-width: 80%;
  max-height: 220px; /* limit image height */
  height: auto;
  border-radius: 12px;
}

.illustration h2 {
  margin-top: 20px;
  color: #6a1b9a;
  font-weight: 600;
  text-align: center;
}

.container {
  flex: 1;
  padding: clamp(15px, 5vw, 30px);
  background: #faf5fb;
}

.toggle-buttons {
  display: flex;
  justify-content: space-between;
  margin-bottom: 20px;
  border-radius: 12px;
  overflow: hidden;
}

.toggle-buttons button {
  flex: 1;
  padding: 12px;
  border: none;
  cursor: pointer;
  font-weight: bold;
  background-color: #d1c4e9;
  color: #4a148c;
  transition: 0.3s;
}

.toggle-buttons button.active {
  background-color: #7e57c2;
  color: white;
}

.form-section {
  display: none;
  animation: fadeIn 0.4s ease-in-out;
}

.form-section.active {
  display: block;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

label {
  font-weight: 500;
  margin-top: 12px;
  display: block;
  color: #4a148c;
}

input,
select {
  width: 100%;
  padding: 12px;
  margin-top: 4px;
  border: 1px solid #d1c4e9;
  border-radius: 10px;
  margin-bottom: 12px;
  outline: none;
}

input:focus,
select:focus {
  border-color: #7e57c2;
  box-shadow: 0 0 5px rgba(126, 87, 194, 0.4);
}

.form-btn,
.google-btn {
  width: 100%;
  font-size: 16px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  padding: 12px;
  margin-top: 10px;
}

.form-btn {
  background-color: #7e57c2;
  color: white;
}

.form-btn:hover {
  background-color: #6a1b9a;
}

.google-btn {
  background-color: #db4437;
  color: white;
  text-align: center;
  display: block;
}

.google-btn:hover {
  background-color: #c1351d;
}

.checkbox-group {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 10px 0;
}

.checkbox-group label {
  margin: 0;
  line-height: 1;
  font-weight: normal;
  color: #4a148c;
}

.checkbox-group a {
  font-weight: bold;
  color: #6a1b9a;
}

.flash {
  padding: 12px 20px;
  margin: 15px auto;
  width: 90%;
  border-radius: 8px;
  font-weight: bold;
  text-align: center;
}

.flash.success {
  background-color: #c8e6c9;
  color: #256029;
}

.flash.danger {
  background-color: #ffcdd2;
  color: #b71c1c;
}

/* Tablets */
@media (max-width: 768px) {
  .main-container {
    flex-direction: column;
    width: 95%;
    min-height: auto;
    margin: 20px auto;
  }

  .illustration {
    order: 1;
    padding: 20px;
  }

  .illustration img {
    max-height: 180px; /* shrink image */
  }

  .container {
    order: 2;
    padding: 20px;
  }
}

/* Phones */
@media (max-width: 480px) {
  .main-container {
    min-height: 100vh; /* fill full viewport */
  }

  .illustration img {
    max-height: 120px; /* shrink more for phones */
    width: auto;
  }

  .toggle-buttons button {
    font-size: 14px;
    padding: 10px;
  }

  .form-btn,
  .google-btn {
    font-size: 14px;
    padding: 10px;
  }

  label {
    font-size: 14px;
  }
}
</style>


  <script>
    // Show login or register
    function showForm(type) {
      document.getElementById('loginForm').classList.remove('active');
      document.getElementById('registerForm').classList.remove('active');
      document.querySelectorAll(".toggle-buttons button").forEach(btn => btn.classList.remove("active"));
      document.getElementById(type + 'Form').classList.add('active');
      document.getElementById(type + 'Btn').classList.add('active');
    }

    // Toggle college/school fields
    function toggleFields() {
      const type = document.getElementById('user_type').value;
      document.getElementById('college-fields').style.display = type === 'college' ? 'block' : 'none';
      document.getElementById('school-fields').style.display = type === 'school' ? 'block' : 'none';
    }

    // Toggle show/hide password
    function togglePassword() {
      let pwd = document.getElementById("password");
      let cpwd = document.getElementById("confirm_password");
      pwd.type = pwd.type === "password" ? "text" : "password";
      cpwd.type = cpwd.type === "password" ? "text" : "password";
    }

    // Validate registration form
    function validateForm() {
      const pwd = document.getElementById("password").value;
      const cpwd = document.getElementById("confirm_password").value;

      if (pwd !== cpwd) {
        alert("Passwords do not match!");
        return false;
      }
      return true;
    }

    window.onload = () => {
      showForm('login'); // default form
    };
  </script>
</head>

<body>
  <!-- Flash Messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
  {% for category, message in messages %}
  <div class="flash {{ category }}">{{ message }}</div>
  {% endfor %}
  {% endif %}
  {% endwith %}

  <div class="main-container">
    <!-- Illustration -->
    <div class="illustration">
      <img src="{{ url_for('static', filename='login image/image.png') }}" alt="StudySpark Login Illustration">
      <h2>Stay Chill âœŒ Login or Register</h2>
    </div>

    <!-- Forms -->
    <div class="container">
      <div class="toggle-buttons">
        <button id="loginBtn" onclick="showForm('login')">Login</button>
        <button id="registerBtn" onclick="showForm('register')">Register</button>
      </div>

      <!-- LOGIN FORM -->
      <div id="loginForm" class="form-section">
        <h2>Login</h2>
        <form method="POST" action="{{ url_for('routes.auth') }}">
          <input type="hidden" name="action" value="login">
          <input type="text" name="username" placeholder="Email or Phone Number" required>
          <input type="password" name="password" placeholder="Password" required>
          <div class="checkbox-group">
            <label><input type="checkbox" name="remember"> Remember me</label>
            <a href="#">Forgot Password?</a>
          </div>
          <button type="submit" class="form-btn">Login</button>
          <a href="{{ url_for('google.login') }}" class="form-btn google-btn">Login with Google</a>
        </form>
      </div>

      <!-- REGISTER FORM -->
      <div id="registerForm" class="form-section">
        <h2>Register</h2>
        <form method="POST" action="{{ url_for('routes.auth') }}" onsubmit="return validateForm()">
          <input type="hidden" name="action" value="register">

          <label for="name">Full Name:</label>
          <input type="text" name="name" required>

          <label for="email">Email:</label>
          <input type="email" name="email" required>

          <label for="phone">Phone Number:</label>
          <input type="tel" name="phone" pattern="[0-9]{10}" placeholder="10-digit number" required>

          <label for="user_type">You are a:</label>
          <select name="user_type" id="user_type" onchange="toggleFields()" required>
            <option value="">Select...</option>
            <option value="college">College Student</option>
            <option value="school">School Student</option>
          </select>

          <div id="college-fields" style="display:none;">
            <label for="course">Course:</label>
            <select name="course">
              <option value="">Select...</option>
              <option value="B.Tech">B.Tech</option>
              <option value="BCA">BCA</option>
              <option value="BSc">B.Sc</option>
              <option value="BA">B.A</option>
              <option value="M.Tech">M.Tech</option>
              <option value="MCA">MCA</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div id="school-fields" style="display:none;">
            <label for="class">Class:</label>
            <select name="class">
              <option value="">Select...</option>
              <option value="6">6th</option>
              <option value="7">7th</option>
              <option value="8">8th</option>
              <option value="9">9th</option>
              <option value="10">10th</option>
              <option value="11">11th</option>
              <option value="12">12th</option>
            </select>
          </div>

          <label for="username">Username:</label>
          <input type="text" name="username" required>

          <label for="password">Password:</label>
          <input type="password" name="password" id="password" required pattern=".{8,}"
            title="Minimum 8 characters">

          <label for="confirm_password">Confirm Password:</label>
          <input type="password" name="confirm_password" id="confirm_password" required>

          <div class="checkbox-group">
            <input type="checkbox" onclick="togglePassword()" id="showPassword">
            <label for="showPassword">Show Password</label>
          </div>

          <div class="checkbox-group">
            <input type="checkbox" id="terms" required>
            <label for="terms">I agree to the <a href="{{ url_for('routes.terms') }}">Terms & Conditions</a></label>
          </div>

          <button type="submit" class="form-btn">Register</button>
          <a href="{{ url_for('google.login') }}" class="google-btn">Register with Google</a>
        </form>
      </div>
    </div>
  </div>
</body>

</html>

